<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Priority Task List</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#667eea">
    <script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/service-worker.js');
  }
  </script>
<link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar-overlay" id="sidebarOverlay" onclick="closeSidebar()"></div>
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h2>Menu</h2>
            <button class="close-sidebar-btn" onclick="closeSidebar()">&times;</button>
        </div>
        <div class="sidebar-content">
            <button class="sidebar-item" onclick="navigateToPage('tasks')">
                <span class="sidebar-icon">üìã</span>
                <span>All Tasks</span>
            </button>
            <button class="sidebar-item" onclick="navigateToPage('focus')">
                <span class="sidebar-icon">üéØ</span>
                <span>Focus Mode</span>
            </button>
            <button class="sidebar-item" onclick="openSettingsModalFromSidebar()">
                <span class="sidebar-icon">‚öôÔ∏è</span>
                <span>Weight Settings</span>
            </button>
            <button class="sidebar-item" onclick="navigateToPage('about')">
        <span class="sidebar-icon">‚ÑπÔ∏è</span>
        <span>WTF is this app</span>
    </button>
        </div>
    </div>

    <div class="container">
    <!-- Tasks Page -->
    <div class="page active" id="tasksPage">
        <div class="header">
            <button class="hamburger-btn" onclick="toggleSidebar()">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <h1>Tasks</h1>
            <button class="filter-btn" onclick="toggleFilterDropdown()">
                üè∑Ô∏è Filter
            </button>
            <div class="filter-dropdown" id="filterDropdown"></div>
        </div>

        <div class="task-list" id="taskList">
            <div class="empty-state">
                <h3>No tasks yet</h3>
                <p>Click the + button to add your first task!</p>
            </div>
        </div>
    </div>

    <!-- Focus Page -->
    <div class="page" id="focusPage">
        <div class="header">
            <button class="hamburger-btn" onclick="toggleSidebar()">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <h1>üéØ FOCUS</h1>
        </div>

        <div class="focus-content">
            <div class="focus-instructions">
                <p>Here you can pin tasks that you want to focus on</p>
            </div>
            <div class="focus-list" id="focusList">
                <div class="empty-state">
                    <h3>No focused tasks</h3>
                    <p>Go to All Tasks and pin tasks to focus on them!</p>
                </div>
            </div>
        </div>
    </div>
    <div class="page" id="aboutPage">
            <div class="header">
                <button class="hamburger-btn" onclick="toggleSidebar()">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                <h1>‚ÑπÔ∏è WTF is this app</h1>
            </div>

            <div class="about-content">
                <div class="about-section">
                    <p>Hi! Welcome to my app.</p>
                    <p>In this section I am going to explain to you WTF is this app.</p>
                    <p>It is a simple task organizer with a small twist...it is trying to help you to offload what task to do first or next. Together with some other helpful features to keep you on track. </p>
                    <p>It does so by giving each task a score based on these metrics (which are derived from Eisenhower matrix):</p>
                    <ul>
                         <li><strong>Importance, 1-5</strong> (How important is this task for you/your life/your work?)</li>
                         <li><strong>Effort, 1-5</strong> (How much effort do I have to put in to finish it?)</li>
                         <li><strong>Urgency</strong> (This one is calucled based on how many days are left)</li>
                    </ul>
                    <p>App then takes these values, adds them up, generates you a score and orders your tasks.</p>
                    <p>But that's not everything! You can find everything that it can do below.</p>
                </div>
                <div class="about-section">
                    <h2>Weights</h2>
                    <p>This feature allows you to determine how much certain metric influences your score.</p>
                    <p>So it allows you to determine which of the metrics is important for you and what you want to nuance. For example:</p>
                    <ul>
                         <li>If you want to more important tasks first -> Give more weight to Importance</li>
                         <li>Is how much time a task takes important? -> Give more weight to Effort</li>
                         <li>Do you want to get tasks that are closer to current day first? -> Give more weight to Urgency</li>
                         <li>Is Importance not important for you and just want a score based on Effort and Urgency?-> No problem! Just put Importance weight to 0 </li>
                    </ul>
                    <p>Try it out yourself! Just go to "Weights" in the sidebar</p>
                </div>
                <div class="about-section">
                    <h2>Tasks</h2>
                    <p>To create a task click on the big plus sign "+" (in case you don't know how it looks)</p>
                    <p>Then fillout the fields and determine how importan, demanding and urgent your task is and press "Save Task"</p>
                    <h3>Huh? What is the Subtask thingy?</h3>
                    <p>I am glad you asked my friend.</p>
                    <p>You can easily break up a task into smaller or individual parts that you can then tick off as you complete them.</p>
                    <p>It is especially helpful to get you going and "knowing your next step". This way you can make task more digestable.</p>
                    <p>App will also track your progress as you get the job done.</p>
                </div>
                <div class="about-section">
                    <h2>Focus Mode</h2>
                    <p>Sometimes you might want to display only on certain tasks when you are working and not go throught the whole list. Don't worry I got you.</p>
                    <p>Simply pin one of your tasks and then navigate to "Focus Mode" in the side bar. Now you know what to focus on today.</p>
                </div>

                <div class="about-section">
                    <h2>Tags</h2>
                    <p>To each task you can also assign a tag. This should help you to keep stuff nicely organized.</p>
                    <p>You can then filter the tags.</p>
                    <p>(Btw you can also filter multiple tags at the same time.</p>
                </div>

                <div class="about-section">
                    <h2>Info and Disclaimers</h2>
                    <ul>
                        <li>All your data is stored in your device, so you can use it offline without any trouble.</li>
                        <li><strong>Watch out for deleting your browser data (or cache) as this app is directly connected to your browser. So, if you delete them, all your tasks will be lost. x_x</strong></li>
                        <li>NO WORRIES! if the score is negative. It is just, becuase of the way the formula is structured. As you will be getting closer to the deadline it will turn positive again.</li>
                        <li>This app is still under the development, so you might experience some technical turbulances.</li>
                        <li>I will be glad for any feedback you have on it :)</li>
                    </ul>
                </div>
                <div class="about-section">
                    <p>I hope you enjoy the app and it will help you to get the work done.</p>
                </div>
            </div>
        </div>
    </div>
</div>

    <button class="add-btn" onclick="openModal()">+</button>

    <div class="modal-overlay" id="modalOverlay" onclick="closeModalOnOverlay(event)">
        <div class="modal" onclick="event.stopPropagation()">
            <div class="modal-header">
                <h2>Add New Task</h2>
                <button class="close-btn" onclick="closeModal()">&times;</button>
            </div>

            <div class="form-group">
                <label for="taskName">Task Name</label>
                <input type="text" id="taskName" placeholder="Enter your task...">
            </div>

            <div class="form-group">
                <label for="taskTag">Tag (optional)</label>
                <input type="text" id="taskTag" placeholder="e.g., Work, Personal, Study...">
            </div>

            <div class="form-group">
                <label for="importance">Importance</label>
                <div class="slider-wrapper">
                    <input type="range" id="importance" class="slider" min="0" max="5" value="0" oninput="updateSliderValue('importance')">
                    <span class="slider-value" id="importanceValue">0</span>
                </div>
            </div>

            <div class="form-group">
                <label for="effort">Effort</label>
                <div class="slider-wrapper">
                    <input type="range" id="effort" class="slider" min="0" max="5" value="0" oninput="updateSliderValue('effort')">
                    <span class="slider-value" id="effortValue">0</span>
                </div>
            </div>

            <div class="form-group">
                <label for="deadline">Deadline</label>
                <input type="date" id="deadline">
            </div>

            <div class="subtasks-section">
                <div class="subtasks-header">
                    <h3>Subtasks (optional)</h3>
                    <button type="button" class="btn-add-subtask" onclick="addSubtaskInput()">+ Add Subtask</button>
                </div>
                <div id="subtasksList">
                    <p class="subtask-empty">No subtasks added yet</p>
                </div>
            </div>
            
            <div class="form-group">
                <label for="taskNotes">Notes (optional)</label>
                <textarea id="taskNotes" placeholder="Write additional details here..." 
                  style="width:100%; height:100px; padding:10px; border:2px solid #dee2e6; border-radius:8px; font-size:14px;"></textarea>
            </div>

            <button class="btn-save" onclick="addTask()">Save Task</button>
        </div>
    </div>

    <div class="modal-overlay" id="settingsModalOverlay" onclick="closeSettingsModalOnOverlay(event)">
        <div class="modal" onclick="event.stopPropagation()">
            <div class="modal-header">
                <h2>‚öôÔ∏è Weight Settings</h2>
                <button class="close-btn" onclick="closeSettingsModal()">&times;</button>
            </div>

            <div class="weights-info">
                <strong>Current Formula:</strong> Score = (Importance √ó <span id="displayImportanceWeight">0.1</span>) + (Effort √ó <span id="displayEffortWeight">0.4</span>) + ((7-Days remaining √∑ 2) √ó <span id="displayUrgencyWeight">0.5</span>)
            </div>

            <div class="form-group">
                <label for="importanceWeight">Importance Weight</label>
                <div class="slider-wrapper">
                    <input type="range" id="importanceWeight" class="slider" min="0" max="1" step="0.1" value="0.1" oninput="updateWeightSlider('importanceWeight')">
                    <span class="slider-value" id="importanceWeightValue">0.1</span>
                </div>
            </div>

            <div class="form-group">
                <label for="effortWeight">Effort Weight</label>
                <div class="slider-wrapper">
                    <input type="range" id="effortWeight" class="slider" min="0" max="1" step="0.1" value="0.4" oninput="updateWeightSlider('effortWeight')">
                    <span class="slider-value" id="effortWeightValue">0.4</span>
                </div>
            </div>

            <div class="form-group">
                <label for="urgencyWeight">Urgency Weight (Days Remaining)</label>
                <div class="slider-wrapper">
                    <input type="range" id="urgencyWeight" class="slider" min="0" max="1" step="0.1" value="0.5" oninput="updateWeightSlider('urgencyWeight')">
                    <span class="slider-value" id="urgencyWeightValue">0.5</span>
                </div>
            </div>

            <div class="weight-note">
                Adjust these weights to change how tasks are prioritized. Higher weights mean that category has more influence on the score.
            </div>

            <button class="btn-save" onclick="saveWeights()">Apply Weights</button>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
    <script src="app.js"></script>
</body>
</html>