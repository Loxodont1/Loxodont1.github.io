<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Priority Task List</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#667eea">
    <script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/service-worker.js');
  }
  </script>
<link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar-overlay" id="sidebarOverlay" onclick="closeSidebar()"></div>
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h2>Menu</h2>
            <button class="close-sidebar-btn" onclick="closeSidebar()">&times;</button>
        </div>
        <div class="sidebar-content">
            <button class="sidebar-item" onclick="navigateToPage('tasks')">
                <span class="sidebar-icon">üìã</span>
                <span>All Tasks</span>
            </button>
            <button class="sidebar-item" onclick="navigateToPage('focus')">
                <span class="sidebar-icon">üéØ</span>
                <span>Focus Mode</span>
            </button>
            <button class="sidebar-item" onclick="openSettingsModalFromSidebar()">
                <span class="sidebar-icon">‚öôÔ∏è</span>
                <span>Weight Settings</span>
            </button>
        </div>
    </div>

    <div class="container">
    <!-- Tasks Page -->
    <div class="page active" id="tasksPage">
        <div class="header">
            <button class="hamburger-btn" onclick="toggleSidebar()">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <h1>Tasks</h1>
            <button class="filter-btn" onclick="toggleFilterDropdown()">
                üè∑Ô∏è Filter
            </button>
            <div class="filter-dropdown" id="filterDropdown"></div>
        </div>

        <div class="task-list" id="taskList">
            <div class="empty-state">
                <h3>No tasks yet</h3>
                <p>Click the + button to add your first task!</p>
            </div>
        </div>
    </div>

    <!-- Focus Page -->
    <div class="page" id="focusPage">
        <div class="header">
            <button class="hamburger-btn" onclick="toggleSidebar()">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <h1>üéØ FOCUS</h1>
        </div>

        <div class="focus-content">
            <div class="focus-instructions">
                <p>Pin tasks here to focus on them</p>
            </div>
            <div class="focus-list" id="focusList">
                <div class="empty-state">
                    <h3>No focused tasks</h3>
                    <p>Go to All Tasks and pin tasks to focus on them!</p>
                </div>
            </div>
        </div>
    </div>
</div>

    <button class="add-btn" onclick="openModal()">+</button>

    <div class="modal-overlay" id="modalOverlay" onclick="closeModalOnOverlay(event)">
        <div class="modal" onclick="event.stopPropagation()">
            <div class="modal-header">
                <h2>Add New Task</h2>
                <button class="close-btn" onclick="closeModal()">&times;</button>
            </div>

            <div class="form-group">
                <label for="taskName">Task Name</label>
                <input type="text" id="taskName" placeholder="Enter your task...">
            </div>

            <div class="form-group">
                <label for="taskTag">Tag (optional)</label>
                <input type="text" id="taskTag" placeholder="e.g., Work, Personal, Study...">
            </div>

            <div class="form-group">
                <label for="importance">Importance</label>
                <div class="slider-wrapper">
                    <input type="range" id="importance" class="slider" min="0" max="5" value="0" oninput="updateSliderValue('importance')">
                    <span class="slider-value" id="importanceValue">0</span>
                </div>
            </div>

            <div class="form-group">
                <label for="effort">Effort</label>
                <div class="slider-wrapper">
                    <input type="range" id="effort" class="slider" min="0" max="5" value="0" oninput="updateSliderValue('effort')">
                    <span class="slider-value" id="effortValue">0</span>
                </div>
            </div>

            <div class="form-group">
                <label for="deadline">Deadline</label>
                <input type="date" id="deadline">
            </div>

            <div class="subtasks-section">
                <div class="subtasks-header">
                    <h3>Subtasks (optional)</h3>
                    <button type="button" class="btn-add-subtask" onclick="addSubtaskInput()">+ Add Subtask</button>
                </div>
                <div id="subtasksList">
                    <p class="subtask-empty">No subtasks added yet</p>
                </div>
            </div>
            
            <div class="form-group">
                <label for="taskNotes">Notes (optional)</label>
                <textarea id="taskNotes" placeholder="Write additional details here..." 
                  style="width:100%; height:100px; padding:10px; border:2px solid #dee2e6; border-radius:8px; font-size:14px;"></textarea>
            </div>

            <button class="btn-save" onclick="addTask()">Save Task</button>
        </div>
    </div>

    <div class="modal-overlay" id="settingsModalOverlay" onclick="closeSettingsModalOnOverlay(event)">
        <div class="modal" onclick="event.stopPropagation()">
            <div class="modal-header">
                <h2>‚öôÔ∏è Weight Settings</h2>
                <button class="close-btn" onclick="closeSettingsModal()">&times;</button>
            </div>

            <div class="weights-info">
                <strong>Current Formula:</strong> Score = (Importance √ó <span id="displayImportanceWeight">0.1</span>) + (Effort √ó <span id="displayEffortWeight">0.4</span>) + ((7-Days remaining √∑ 2) √ó <span id="displayUrgencyWeight">0.5</span>)
            </div>

            <div class="form-group">
                <label for="importanceWeight">Importance Weight</label>
                <div class="slider-wrapper">
                    <input type="range" id="importanceWeight" class="slider" min="0" max="1" step="0.1" value="0.1" oninput="updateWeightSlider('importanceWeight')">
                    <span class="slider-value" id="importanceWeightValue">0.1</span>
                </div>
            </div>

            <div class="form-group">
                <label for="effortWeight">Effort Weight</label>
                <div class="slider-wrapper">
                    <input type="range" id="effortWeight" class="slider" min="0" max="1" step="0.1" value="0.4" oninput="updateWeightSlider('effortWeight')">
                    <span class="slider-value" id="effortWeightValue">0.4</span>
                </div>
            </div>

            <div class="form-group">
                <label for="urgencyWeight">Urgency Weight (Days Remaining)</label>
                <div class="slider-wrapper">
                    <input type="range" id="urgencyWeight" class="slider" min="0" max="1" step="0.1" value="0.5" oninput="updateWeightSlider('urgencyWeight')">
                    <span class="slider-value" id="urgencyWeightValue">0.5</span>
                </div>
            </div>

            <div class="weight-note">
                Adjust these weights to change how tasks are prioritized. Higher weights mean that category has more influence on the score.
            </div>

            <button class="btn-save" onclick="saveWeights()">Apply Weights</button>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
    <script src="app.js"></script>
</body>
</html>